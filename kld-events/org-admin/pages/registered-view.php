<?php

include "./control/db.php";
?>
<!--begin::Entry-->
<div class="d-flex flex-column-fluid">
	<!--begin::Container-->
	<div class=" container ">
		<!--begin::Row-->



		<!--end::Row-->
		<div class="row">
			<div class="col-xl-12">

				<!--begin::Engage Widget 1-->
				<div class="card card-custom card-stretch gutter-b">
					<div class="card-body d-flex p-0">
						<div class="flex-grow-1 p-8 card-rounded bgi-no-repeat d-flex"
							style="background-color: #FFF; background-position: center bottom; background-size: auto 100%; background-image: url(assets/media/svg/humans/custom-88.png)">

							<div class="row">

								<div class="col-12 col-md-3" style="text-align: center;">
									<img src="assets/media/kld4.jpg"
										style="width: 100%; object-fit: cover;" />
								</div>
								<div class="col-12 col-md-9">
									<a href="#" class="d-flex align-items-center">
										<div class="mr-3 d-flex align-items-center bg-hover-light p-2 rounded">
											<div class="flex-shrink-0 text-center">
												<i class="icon-xl fas fa-check text-primary"></i>
											</div>
										</div>
										<h1 class="text-primary font-weight-bolder m-0 text-hover-secondary">Foundation Week 2024</h1>
									</a>


									<h6 class="text-dark-50 font-weight-bolder m-0">KLD Events</h6>
									<div class="d-flex my-5">
										<span
											class="svg-icon svg-icon-md svg-icon-dark flex-shrink-0 mr-3"><!--begin::Svg Icon | path:assets/media/svg/icons/Navigation/Arrow-right.svg--><svg
												width="24px" height="24px" viewBox="0 0 24 24" version="1.1"
												xmlns="http://www.w3.org/2000/svg"
												xmlns:xlink="http://www.w3.org/1999/xlink">
												<g id="Stockholm-icons-/-Design-/-Layers" stroke="none" stroke-width="1"
													fill="none" fill-rule="evenodd">
													<polygon id="Bound" points="0 0 24 0 24 24 0 24"></polygon>
													<path
														d="M12.9336061,16.072447 L19.36,10.9564761 L19.5181585,10.8312381 C20.1676248,10.3169571 20.2772143,9.3735535 19.7629333,8.72408713 C19.6917232,8.63415859 19.6104327,8.55269514 19.5206557,8.48129411 L12.9336854,3.24257445 C12.3871201,2.80788259 11.6128799,2.80788259 11.0663146,3.24257445 L4.47482784,8.48488609 C3.82645598,9.00054628 3.71887192,9.94418071 4.23453211,10.5925526 C4.30500305,10.6811601 4.38527899,10.7615046 4.47382636,10.8320511 L4.63,10.9564761 L11.0659024,16.0730648 C11.6126744,16.5077525 12.3871218,16.5074963 12.9336061,16.072447 Z"
														id="Shape" fill="#000000" fill-rule="nonzero"></path>
													<path
														d="M11.0563554,18.6706981 L5.33593024,14.122919 C4.94553994,13.8125559 4.37746707,13.8774308 4.06710397,14.2678211 C4.06471678,14.2708238 4.06234874,14.2738418 4.06,14.2768747 L4.06,14.2768747 C3.75257288,14.6738539 3.82516916,15.244888 4.22214834,15.5523151 C4.22358765,15.5534297 4.2250303,15.55454 4.22647627,15.555646 L11.0872776,20.8031356 C11.6250734,21.2144692 12.371757,21.2145375 12.909628,20.8033023 L19.7677785,15.559828 C20.1693192,15.2528257 20.2459576,14.6784381 19.9389553,14.2768974 C19.9376429,14.2751809 19.9363245,14.2734691 19.935,14.2717619 L19.935,14.2717619 C19.6266937,13.8743807 19.0546209,13.8021712 18.6572397,14.1104775 C18.654352,14.112718 18.6514778,14.1149757 18.6486172,14.1172508 L12.9235044,18.6705218 C12.377022,19.1051477 11.6029199,19.1052208 11.0563554,18.6706981 Z"
														id="Path" fill="#000000" opacity="0.3"></path>
												</g>
											</svg></span> <span class="text-dark h4 text-hover-primary" data-toggle="tooltip" data-theme="dark" title="View Comment">Academic</span>

										<a href="#">
											<span
												class="svg-icon svg-icon-md svg-icon-dark flex-shrink-0 mr-3 ml-3"><!--begin::Svg Icon | path:assets/media/svg/icons/Navigation/Arrow-right.svg--><svg
													width="24px" height="24px" viewBox="0 0 24 24" version="1.1"
													xmlns="http://www.w3.org/2000/svg"
													xmlns:xlink="http://www.w3.org/1999/xlink">
													<g id="Stockholm-icons-/-Map-/-Marker1" stroke="none" stroke-width="1"
														fill="none" fill-rule="evenodd">
														<rect id="bound" x="0" y="0" width="24" height="24"></rect>
														<path
															d="M5,10.5 C5,6 8,3 12.5,3 C17,3 20,6.75 20,10.5 C20,12.8325623 17.8236613,16.03566 13.470984,20.1092932 C12.9154018,20.6292577 12.0585054,20.6508331 11.4774555,20.1594925 C7.15915182,16.5078313 5,13.2880005 5,10.5 Z M12.5,12 C13.8807119,12 15,10.8807119 15,9.5 C15,8.11928813 13.8807119,7 12.5,7 C11.1192881,7 10,8.11928813 10,9.5 C10,10.8807119 11.1192881,12 12.5,12 Z"
															id="Combined-Shape" fill="#000000" fill-rule="nonzero"></path>
													</g>
												</svg><!--end::Svg Icon--></span> <span
												class="text-dark h4 text-hover-primary ">College Building 1: Gym</span></a>
									</div>

									<div class="d-flex">
										<span><i class="text-dark flaticon2-calendar mr-3"></i></span> <span
											class="text-dark h4">September 18, 2024</span>

										<span
											class="svg-icon svg-icon-md svg-icon-dark flex-shrink-0 mr-3 ml-3"><!--begin::Svg Icon | path:assets/media/svg/icons/Navigation/Arrow-right.svg--><svg
												width="24px" height="24px" viewBox="0 0 24 24" version="1.1"
												xmlns="http://www.w3.org/2000/svg"
												xmlns:xlink="http://www.w3.org/1999/xlink">
												<g id="Stockholm-icons-/-Home-/-Clock" stroke="none" stroke-width="1"
													fill="none" fill-rule="evenodd">
													<rect id="bound" x="0" y="0" width="24" height="24"></rect>
													<path
														d="M12,22 C7.02943725,22 3,17.9705627 3,13 C3,8.02943725 7.02943725,4 12,4 C16.9705627,4 21,8.02943725 21,13 C21,17.9705627 16.9705627,22 12,22 Z"
														id="Mask" fill="#000000" opacity="0.3"></path>
													<path
														d="M11.9630156,7.5 L12.0475062,7.5 C12.3043819,7.5 12.5194647,7.69464724 12.5450248,7.95024814 L13,12.5 L16.2480695,14.3560397 C16.403857,14.4450611 16.5,14.6107328 16.5,14.7901613 L16.5,15 C16.5,15.2109164 16.3290185,15.3818979 16.1181021,15.3818979 C16.0841582,15.3818979 16.0503659,15.3773725 16.0176181,15.3684413 L11.3986612,14.1087258 C11.1672824,14.0456225 11.0132986,13.8271186 11.0316926,13.5879956 L11.4644883,7.96165175 C11.4845267,7.70115317 11.7017474,7.5 11.9630156,7.5 Z"
														id="Path-107" fill="#000000"></path>
												</g>
											</svg><!--end::Svg Icon--></span> <span class="text-dark h4 ">06:00 AM</span>
									</div>



									<p class="text-dark-50 my-5 font-size-xl font-weight-bold">
										wala ako malagay na kahit ano dito kase pang testing lang ganun para malaman ko lang
										kung ano itsura nya kapag naka ano, yung ganito na ano may mahabang text
									</p>

								</div>

							</div>
						</div>

					</div>
				</div>
				<!--end::Engage Widget 1-->
			</div>
		</div>

		<div class="card card-custom gutter-b">
			<!--begin::Header-->
			<div class="card-header border-0 py-5">
				<h3 class="card-title align-items-start flex-column">
					<span class="card-label font-weight-bolder text-dark">Attendees</span>
					<span class="text-muted mt-3 font-weight-bold font-size-sm">Kolehiyo ng Lungsod ng Dasmari√±as</span>
				</h3>
			</div>


			<div class="card-body">
				<div class="mb-7">
					<div class="row align-items-center">
						<div class="col-10">
							<div class="row align-items-center">
								<div class="col-md-3 my-2">
									<div class="d-flex align-items-center">
										<label class="mr-3 mb-0 d-none d-md-block">Type:</label>
										<select class="form-control" id="kt_datatable_search_status">
											<option value="">Student</option>
											<option value="1">Employee</option>
											<option value="2">Admin</option>
										</select>
									</div>
								</div>
								<div class="col-md-3 my-2">
									<div class="d-flex align-items-center">
										<label class="mr-3 mb-0 d-none d-md-block">Program:</label>
										<select class="form-control" id="kt_datatable_search_type">
											<option value="">BSIS</option>
											<option value="1">BSCE</option>
											<option value="2">BSIT</option>
											<option value="3">BSN</option>
										</select>
									</div>
								</div>
								<div class="col-md-3 my-2">
									<div class="d-flex align-items-center">
										<label class="mr-3 mb-0 d-none d-md-block">Year Level:</label>
										<select class="form-control" id="kt_datatable_search_type">
											<option value="">1st</option>
											<option value="1">2nd</option>
											<option value="2">3rd</option>
											<option value="3">4th</option>
										</select>
									</div>
								</div>
								<div class="col-md-3 my-2">
									<div class="d-flex align-items-center">
										<label class="mr-3 mb-0 d-none d-md-block">Section:</label>
										<select class="form-control" id="kt_datatable_search_type">
											<option value="">BSIS 101</option>
											<option value="1">BSIS 103</option>
											<option value="2">BSIS 102</option>
											<option value="3">BSIS 106</option>
										</select>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>



			<div class="card-body py-0">
				<!--begin::Table-->
				<div class="table-responsive">
					<table class="table table-head-custom table-vertical-center" id="kt_advance_table_widget_1">
						<thead>
							<tr class="text-left">
								<th class="pl-0" style="width: 20px">
									<label class="checkbox checkbox-lg checkbox-inline">
										<input type="checkbox" value="1" />
										<span></span>
									</label>
								</th>
								<th class="pr-0" style="width: 50px">Student</th>
								<th style="min-width: 200px"></th>
								<th style="min-width: 150px">Email</th>
								<th style="min-width: 150px">Program</th>
								<th style="min-width: 150px">Section</th>
								<th style="min-width: 150px">Status</th>
								<th class="pr-0 text-right" style="min-width: 150px">Action</th>
							</tr>
						</thead>
						<tbody>
							<?php
							$try = mysqli_query($conn, "SELECT 
									std_acc.*, 
									course_tbl.course_acronym, 
									section_tbl.section_name, 
									yearlvl_tbl.yearlvl_name 
								FROM 
									std_acc 
								JOIN 
									course_tbl ON std_acc.course_id = course_tbl.course_id 
								JOIN 
									section_tbl ON std_acc.section_id = section_tbl.section_id 
								JOIN 
									yearlvl_tbl ON std_acc.yearlvl = yearlvl_tbl.yearlvl_id");
							while ($row = $try->fetch_array()) {


								echo '<td class="pl-0">
									<label class="checkbox checkbox-lg checkbox-inline">
										<input type="checkbox" value="' . $row['std_kld_id'] . '" />
										<span></span>
									</label>
								</td>';

								echo '<td class="pr-0">
									<div class="symbol symbol-50 symbol-light mt-1">
										<span class="symbol-label">
											<img src="' . ($row['std_profilepic'] ? $row['std_profilepic'] : 'assets/media/users/default.jpg') . '" class="h-75 align-self-end" alt=""/>
										</span>
									</div>
								</td>

									';


								echo '<td class="pl-0">

									<a href="#" class="text-dark-75 font-weight-bolder text-hover-primary mb-1 font-size-lg">' . $row['std_fname'] . ' ' . $row['std_lname'] . '</a>
									<span class="text-muted font-weight-bold text-muted d-block">' . $row['std_kld_id'] . '</span>
								</td>

								';

								echo '<td>
									<span class="text-muted font-weight-bold">' . $row['std_kld_email'] . '</span>
								</td>
								';
								echo '<td>
									<span class="text-dark-75 font-weight-bolder d-block font-size-lg">' . $row['course_acronym'] . '</span>
									<span class="text-muted font-weight-bold">' . $row['yearlvl_name'] . '</span>
								</td>

								';

								echo '<td>
									<span class="text-dark-75 font-weight-bolder d-block font-size-lg">' . $row['section_name'] . '</span>
								</td>
								';
								$status = strtoupper($row['status']);
								$label_class = $row['status'] == 'active' ? 'label-light-primary' : 'label-light-danger';
								echo '<td>
									 <span class="label label-lg ' . $label_class . ' label-inline">' . $status . '</span>
								</td>
								';
								$_status = $row['status'] == 'active' ?  'checked="checked"' : '';
								echo '<td class="pr-0 text-right">
									
									
										<span class="switch switch-outline switch-icon switch-success">
											<label>
												<input type="checkbox" ' . $_status . ' name="select"/>
												<span></span>
											</label>
										</span>
																
								</td>
								</tr>
								';
							}
							?>

						</tbody>
					</table>
				</div>
				<!--end::Table-->
			</div>


		</div>
		<!--end::Container-->

	</div>
	<!--end::Entry-->
</div>

<script>
	document.addEventListener('DOMContentLoaded', function() {
		const switches = document.querySelectorAll('.switch input[type="checkbox"]');

		switches.forEach(switchElement => {
			switchElement.addEventListener('change', function() {
				const isChecked = this.checked;
				const studentId = this.value;

				Swal.fire({
					title: "Are you sure?",
					text: isChecked ? "Mark this student as present?" : "Mark this student as absent?",
					icon: "warning",
					showCancelButton: true,
					confirmButtonText: "Yes"
				}).then(function(result) {
					if (result.value) {
						console.log(`Student ID: ${studentId}, Present: ${isChecked}`);
						Swal.fire(
							"Updated!",
							"Attendance has been updated.",
							"success"
						);
					} else {
						switchElement.checked = !isChecked;
					}
				});
			});
		});
	});
</script>